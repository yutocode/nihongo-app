:root{color-scheme:light dark;--bg: #f7f8fa;--surface: #ffffff;--surface-2: #f1f5f9;--border: #e5e7eb;--text: #121417;--text-muted: #4b5563;--icon: var(--text);--accent: #16a34a;--danger: #ef4444;--warn: #f59e0b;--info: #0ea5e9;--link: var(--info);--focus-ring: #60a5fa;--overlay: rgba(2, 6, 23, .4);--disabled: rgba(0,0,0,.35);--shadow: 0 1px 2px rgba(16,24,40,.06), 0 8px 24px rgba(16,24,40,.06);--tab-bg: var(--surface-2);--tab-active-bg: var(--surface);--card-bg: var(--surface);--progress-bg: rgba(2, 6, 23, .08);--progress-fill: var(--accent)}@media (prefers-color-scheme: dark){:root{--bg: #0b0f14;--surface: #121821;--surface-2: #0f141b;--border: #25313f;--text: #e6edf3;--text-muted: #b6c2cd;--icon: var(--text);--accent: #22c55e;--danger: #f87171;--warn: #fbbf24;--info: #38bdf8;--link: var(--info);--focus-ring: #93c5fd;--overlay: rgba(0,0,0,.55);--disabled: rgba(255,255,255,.38);--shadow: 0 1px 2px rgba(0,0,0,.35), 0 12px 28px rgba(0,0,0,.45);--progress-bg: rgba(255,255,255,.12)}}:root[data-theme=light]{--bg: #f7f8fa;--surface: #ffffff;--surface-2: #f1f5f9;--border: #e5e7eb;--text: #121417;--text-muted: #4b5563;--icon: var(--text);--accent: #16a34a;--danger: #ef4444;--warn: #f59e0b;--info: #0ea5e9;--link: var(--info);--focus-ring: #60a5fa;--overlay: rgba(2, 6, 23, .4);--disabled: rgba(0,0,0,.35);--shadow: 0 1px 2px rgba(16,24,40,.06), 0 8px 24px rgba(16,24,40,.06);--tab-bg: var(--surface-2);--tab-active-bg: var(--surface);--card-bg: var(--surface);--progress-bg: rgba(2, 6, 23, .08);--progress-fill: var(--accent)}:root[data-theme=dark]{--bg: #0b0f14;--surface: #121821;--surface-2: #0f141b;--border: #25313f;--text: #e6edf3;--text-muted: #b6c2cd;--icon: var(--text);--accent: #22c55e;--danger: #f87171;--warn: #fbbf24;--info: #38bdf8;--link: var(--info);--focus-ring: #93c5fd;--overlay: rgba(0,0,0,.55);--disabled: rgba(255,255,255,.38);--shadow: 0 1px 2px rgba(0,0,0,.35), 0 12px 28px rgba(0,0,0,.45);--tab-bg: var(--surface-2);--tab-active-bg: var(--surface);--card-bg: var(--surface);--progress-bg: rgba(255,255,255,.12);--progress-fill: var(--accent)}html,body{background:var(--bg);color:var(--text)}a{color:var(--link);text-decoration:none}a:hover{text-decoration:underline}:where(button,[role=button],a,input,select,textarea):focus-visible{outline:2px solid var(--focus-ring);outline-offset:2px;border-radius:8px}::selection{background:color-mix(in oklab,var(--accent) 28%,transparent);color:var(--text)}@media (prefers-reduced-motion: no-preference){*{transition:background-color .15s linear,color .15s linear,border-color .15s linear}}*::-webkit-scrollbar{width:10px;height:10px}*::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--text) 20%,transparent);border-radius:999px;border:2px solid transparent;background-clip:padding-box}*::-webkit-scrollbar-track{background:transparent}@media (forced-colors: active){:root{--shadow: none}:where(button,[role=button],a,input,select,textarea):focus-visible{outline:2px solid CanvasText}}.app-surface{background:var(--surface);box-shadow:var(--shadow)}.app-border{border:1px solid var(--border)}.text-muted{color:var(--text-muted)}.icon{color:var(--icon);fill:currentColor}.tabs{background:var(--tab-bg);border-radius:16px;padding:6px}.tab{color:var(--text-muted)}.tab.is-active{color:var(--text);background:var(--tab-active-bg);box-shadow:var(--shadow)}.lesson-card{background:var(--card-bg);border:1px solid var(--border);box-shadow:var(--shadow);color:var(--text)}.lesson-card .count{color:var(--text-muted)}.progress{height:8px;border-radius:999px;background:var(--progress-bg);overflow:hidden}.progress>span{display:block;height:100%;border-radius:inherit;background:var(--progress-fill)}html{-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}*,*:before,*:after{box-sizing:border-box}html{-webkit-text-size-adjust:100%;color-scheme:light dark}body{margin:0;background-color:var(--color-bg);color:var(--color-text);font-family:system-ui,-apple-system,Noto Sans JP,Roboto,sans-serif;line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding-left:max(0px,env(safe-area-inset-left));padding-right:max(0px,env(safe-area-inset-right));padding-top:max(0px,env(safe-area-inset-top));padding-bottom:max(0px,env(safe-area-inset-bottom))}[hidden],.app-loading[hidden]{display:none!important}#root{min-height:100dvh;min-height:calc(var(--vh, 1vh) * 100);display:contents}:root{--primary-600: #2563EB;--neutral-900: #111318;--neutral-700: #1c1f26;--neutral-500: #6B7280;--neutral-200: #E5E7EB;--accent: #ff9900;--accent-2: #ffcc00;--success: #2ecc71;--danger: #EF4444;--color-bg: #111318;--color-text: #f5f5f5;--color-card: #1c1f26;--color-border: rgba(255,255,255,.1);--radius-card: 16px;--radius-button: 50px;--shadow-elev1: 0 1px 2px rgba(0,0,0,.08), 0 1px 1px rgba(0,0,0,.06);--ring: 0 0 0 3px rgba(255,153,0,.35)}@media (prefers-color-scheme: light){:root{--color-bg: #ffffff;--color-text: #111318;--color-card: #f5f6f8;--color-border: rgba(0,0,0,.08)}}.light{--color-bg: #ffffff;--color-text: #111318;--color-card: #f5f6f8;--color-border: rgba(0,0,0,.08)}.dark{--color-bg: #111318;--color-text: #f5f5f5;--color-card: #1c1f26;--color-border: rgba(255,255,255,.1)}:root{--fs-sm: clamp(12px, 1.6vw, 14px);--fs-md: clamp(14px, 1.9vw, 16px);--fs-lg: clamp(16px, 2.3vw, 20px);--fs-xl: clamp(20px, 4.5vw, 28px)}body{font-size:var(--fs-md)}h1,h2,h3,h4,h5{margin:0 0 .6em;line-height:1.25}h1{font-size:var(--fs-xl)}h2{font-size:clamp(18px,3.6vw,24px)}p{font-size:var(--fs-md);margin:0 0 1em}ruby{ruby-position:over}rt{font-size:.6em;opacity:.9;letter-spacing:.02em}.card{background-color:var(--color-card);border-radius:20px;padding:clamp(12px,3.5vw,24px);border:1px solid var(--color-border);box-shadow:0 6px 24px #00000080;transition:transform .25s ease,box-shadow .25s ease}@media (hover: hover) and (pointer: fine){.card:hover{transform:translateY(-5px);box-shadow:0 12px 28px #000000b3}}img{max-width:100%;height:auto;display:block;border-radius:12px}button,.btn-primary,.btn-success{display:inline-block;text-align:center;font-weight:700;border:none;border-radius:var(--radius-button);cursor:pointer;transition:transform .2s,box-shadow .2s,background .3s;-webkit-tap-highlight-color:transparent;min-height:44px;padding:.8rem 1.6rem;font-size:var(--fs-md);color:var(--color-text)}.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#000}@media (hover: hover) and (pointer: fine){.btn-primary:hover{background:linear-gradient(135deg,var(--accent-2),var(--accent));transform:scale(1.05)}}.btn-success{background-color:var(--success);color:#fff}@media (hover: hover) and (pointer: fine){.btn-success:hover{background-color:#27ae60;transform:scale(1.05)}}button:focus-visible,.btn-primary:focus-visible,.btn-success:focus-visible{outline:none;box-shadow:var(--ring)}button:disabled,.btn-primary:disabled,.btn-success:disabled{opacity:.5;cursor:not-allowed}.container{width:min(100% - 32px,960px);margin-inline:auto}.grid{display:grid;gap:clamp(10px,2.8vw,16px)}.grid.auto{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.app-wrap{padding:clamp(12px,3vw,24px);padding-left:max(clamp(12px,3vw,24px),env(safe-area-inset-left));padding-right:max(clamp(12px,3vw,24px),env(safe-area-inset-right));padding-top:max(clamp(12px,3vw,24px),env(safe-area-inset-top));padding-bottom:max(clamp(12px,3vw,24px),env(safe-area-inset-bottom))}.bn{position:sticky;bottom:0;left:0;right:0;display:flex;justify-content:center;background:transparent;padding-bottom:max(env(safe-area-inset-bottom),0px);z-index:50}.bn-inner{width:100%;max-width:480px;height:88px;margin:0 auto;background:var(--color-bg);border-radius:var(--radius-card) var(--radius-card) 0 0;box-shadow:var(--shadow-elev1);border-top:1px solid var(--neutral-200);display:grid;grid-template-columns:repeat(5,1fr);align-items:center}.bn-tab{position:relative;height:100%;color:var(--neutral-500);display:grid;place-items:center;gap:2px;text-decoration:none}.bn-tab svg{width:24px;height:24px}.bn-label{font:400 12px/16px Noto Sans JP,system-ui,sans-serif}.bn-tab.is-active{color:var(--primary-600)}.bn-hit{position:absolute;width:44px;height:44px;top:50%;left:50%;transform:translate(-50%,-50%)}.bn-tab:focus-visible{outline:2px solid var(--primary-600);outline-offset:-2px;border-radius:8px}@media (max-width: 374px){.grid.cols{grid-template-columns:1fr}}@media (min-width: 375px) and (max-width: 399px){.grid.cols{grid-template-columns:1fr}}@media (min-width: 400px) and (max-width: 429px){.grid.cols{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 430px){.grid.cols{grid-template-columns:repeat(2,minmax(0,1fr))}.container{width:min(100% - 40px,1000px)}}@media (prefers-reduced-motion: reduce){*{transition:none!important;animation:none!important}}:root{--xp-green-dark: #0b3d2e;--xp-green-light: #1ca77c}.xp-banner{display:flex;align-items:center;background:#111;padding:10px 16px;border-radius:14px;position:relative;overflow:hidden;width:100%;max-width:640px}.xp-badge{width:40px;height:40px;border-radius:50%;background:linear-gradient(150deg,var(--xp-green-dark),#06231a);outline:1px solid rgba(28,167,124,.45);box-shadow:inset 0 0 0 1px #00000040,0 8px 20px #00000059;color:var(--xp-green-light);display:flex;align-items:center;justify-content:center;font-size:18px}.xp-main{flex:1;margin-left:14px}.xp-title{font-size:14px;font-weight:600;color:#fff;display:flex;align-items:center}.xp-levelchip{background:linear-gradient(120deg,var(--xp-green-light),var(--xp-green-dark));padding:2px 8px;border-radius:6px;box-shadow:0 0 12px #1ca77c47;color:#fff;font-size:12px;margin-right:6px}.xp-numbers{font-size:13px;color:#ccc}.xp-per{color:var(--xp-green-light)}.xp-rail{height:6px;background:#222;border-radius:6px;overflow:hidden;margin-top:6px;width:100%}.xp-fill{height:100%;background:linear-gradient(90deg,var(--xp-green-light),var(--xp-green-dark));box-shadow:0 0 16px #1ca77c59;transition:width .5s ease-out}.levelup-pop{position:absolute;top:-8px;right:12px;background:linear-gradient(120deg,var(--xp-green-light),var(--xp-green-dark));padding:4px 10px;border-radius:8px;box-shadow:0 10px 30px #1ca77c59;color:#fff;font-weight:700;animation:popUp 1s ease-out forwards}@keyframes popUp{0%{transform:translateY(-20px);opacity:0}40%{transform:translateY(0);opacity:1}to{opacity:0}}.confetti{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.confetti span{position:absolute;top:-10px;width:6px;height:6px;background:var(--xp-green-light);animation:fall 1.5s linear forwards}.confetti span:nth-child(odd){background:var(--xp-green-dark)}.confetti span{left:calc(var(--i) * 8%)}@keyframes fall{0%{transform:translateY(-10px) rotate(0);opacity:1}to{transform:translateY(60px) rotate(360deg);opacity:0}}.app-header{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;position:relative;z-index:100}.hdr-left{flex:0 0 auto;display:flex;align-items:center}.hdr-center{flex:1 1 auto;display:flex;justify-content:center;align-items:center}.hdr-right{flex:0 0 auto;display:flex;align-items:center;gap:8px;justify-content:flex-end}.hdr-btn.is-ghost,.hdr-icon-btn{background:#fff;border:1px solid #d0d0d0;border-radius:8px;padding:6px 10px;display:inline-flex;align-items:center;gap:6px;cursor:pointer;transition:box-shadow .15s ease,transform .05s ease}.hdr-icon-btn{border-radius:50%;width:36px;height:36px;justify-content:center}.hdr-icon-btn:active{transform:translateY(1px)}.app-header{background-color:#0b0c0feb;box-shadow:0 1px #ffffff17,0 6px 20px #00000059;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px)}.hdr-right .hdr-btn.is-ghost,.hdr-right .hdr-icon-btn{border-color:#ffffff2e;background:#ffffff0f}.hdr-right .hdr-btn.is-ghost:hover,.hdr-right .hdr-icon-btn:hover{background:#ffffff1f;border-color:#ffffff47;filter:saturate(1.1)}.hdr-right .hdr-ic{font-size:18px;color:#fff;opacity:.95}.hdr-btn.is-ghost:focus-visible,.hdr-btn.is-primary:focus-visible,.hdr-icon-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--ring),0 0 0 1px #ffffff40 inset}@media (max-width:480px){.hdr-right .hdr-btn,.hdr-right .hdr-icon-btn{min-width:44px;height:40px}.hdr-right .hdr-ic{font-size:19px}}.hdr-right .level-btn{font-weight:700;letter-spacing:.2px;border-color:#7c3aed73;background:linear-gradient(180deg,#7c3aed2e,#7c3aed1a);box-shadow:inset 0 0 0 1px #ffffff0f}.hdr-right .level-btn:hover{background:linear-gradient(180deg,#7c3aed42,#7c3aed29);border-color:#7c3aeda6}.level-select-modal{border:1px solid rgba(255,255,255,.18);background:#14161bf5;color:var(--text);box-shadow:0 14px 40px #00000073}.level-select-modal h3{color:#fff;opacity:.95}.level-select-modal li{border-radius:10px;padding:8px 10px}.level-select-modal li:hover{background:#ffffff14}.footer{max-width:1024px;margin:32px auto 24px;padding:0 16px;display:grid;gap:6px;color:#6b7280;font-size:12px;line-height:1.6}.footer__links{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.footer__link{color:#6b7280;text-decoration:none}.footer__link:hover,.footer__link:focus-visible{text-decoration:underline;color:#374151}.footer__dot,.footer__sep{color:#9ca3af}.footer__meta{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.footer__copy,.footer__ver{color:#6b7280}.footer__tagline{margin:0;color:#9ca3af}.theme-dark .footer,.theme-dark .footer__link{color:#9ca3af}.theme-dark .footer__link:hover,.theme-dark .footer__link:focus-visible{color:#d1d5db}.theme-dark .footer__dot,.theme-dark .footer__sep{color:#6b7280}.theme-dark .footer__copy,.theme-dark .footer__ver,.theme-dark .footer__tagline{color:#9ca3af}:root{--bn-height: 88px;--bn-bg: #ffffff;--bn-border: #e5e7eb;--bn-active: #2563eb;--bn-inactive: #6b7280;--bn-shadow: 0 -8px 24px rgba(0,0,0,.06);--bn-icon-size: 24px}@media (prefers-color-scheme: dark){:root{--bn-bg: #0f141a;--bn-border: #1f2937;--bn-inactive: #9ca3af;--bn-shadow: 0 -8px 24px rgba(0,0,0,.3)}}.bn-wrap{position:fixed;left:0;right:0;bottom:0;padding-bottom:env(safe-area-inset-bottom,0px);z-index:1000}.bn-bar{list-style:none;margin:0;padding:12px 24px;height:var(--bn-height);display:flex;align-items:center;justify-content:space-between;gap:8px;background:var(--bn-bg);border-top:1px solid var(--bn-border);box-shadow:var(--bn-shadow)}.bn-item{flex:1 1 0;display:flex;justify-content:center}.bn-link{min-width:44px;min-height:44px;display:flex;align-items:center;justify-content:center;color:var(--bn-inactive);text-decoration:none;border-radius:12px;transition:color .15s ease,background .15s ease,transform .12s ease;outline:none}.bn-link:hover,.bn-link.is-active{color:var(--bn-active)}.bn-link:focus-visible{background:#2563eb1a;box-shadow:0 0 0 2px #2563eb40}.bn-icon{font-size:var(--bn-icon-size);line-height:1}.bn-item--accent .bn-link{transform:translateY(-2px)}.bn-item--accent .bn-link.is-active{transform:translateY(-3px)}.bn-safezone{height:env(safe-area-inset-bottom,0px)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}html,body,#root{height:100%}body{margin:0}.app-shell{min-height:100dvh;display:flex;flex-direction:column}.app-content{flex:1 0 auto;padding-bottom:calc(var(--bn-height, 88px) + env(safe-area-inset-bottom,0px) + 8px)}.app-content.has-actionbar{padding-bottom:calc(var(--bn-height, 88px) + 56px + env(safe-area-inset-bottom,0px))}.loader-wrap{display:grid;place-items:center;padding:24px}.loader-wrap--backdrop{position:fixed;inset:0;background:color-mix(in srgb,#000 10%,transparent);z-index:1000}.loader{width:220px;user-select:none;text-align:center;color:var(--fg, #111827)}.loader.sm{width:160px}.loader.lg{width:280px}.loader__svg{display:block;margin:0 auto;height:auto}.loader__text{margin-top:10px;font-size:12px;color:color-mix(in srgb,currentColor 70%,transparent)}.book{fill:#60a5fa}.book-side{fill:#3b82f6}.ribbon{fill:#f43f5e}.eye,.mouth,.shuriken{fill:currentColor}.shadow{fill:#0000001f}.page-stroke{fill:none;stroke:#fff;stroke-width:2.5;stroke-linecap:round;stroke-dasharray:120;stroke-dashoffset:120;animation:draw 2.4s ease-in-out infinite}.book,.book-side,.eye,.mouth,.ribbon,.dot-1,.dot-2,.dot-3,.shuriken{animation:float 3s ease-in-out infinite}.shadow{animation:shadow 3s ease-in-out infinite}.eye--left,.eye--right{transform-origin:center}.eye--left{animation:blink 4s infinite}.eye--right{animation:blink 4.2s infinite .2s}.dot{fill:#111827}.dot-1{animation:bounce 1.2s infinite}.dot-2{animation:bounce 1.2s infinite .2s}.dot-3{animation:bounce 1.2s infinite .4s}.shuriken{transform-box:fill-box;transform-origin:center;animation:spin 1.8s linear infinite}.theme-dark .loader{--fg: #e5e7eb;color:var(--fg)}.theme-dark .book{fill:#1f2937}.theme-dark .book-side{fill:#111827}.theme-dark .ribbon{fill:#f472b6}.theme-dark .dot{fill:var(--fg)}.theme-dark .shadow{fill:#00000059}.theme-dark .page-stroke{stroke:#d1d5db}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}@keyframes shadow{0%,to{transform:scale(1);opacity:.34}50%{transform:scale(.92);opacity:.22}}@keyframes blink{0%,92%,to{transform:scaleY(1)}95%{transform:scaleY(.2)}}@keyframes bounce{0%,to{transform:translateY(0);opacity:.8}50%{transform:translateY(-8px);opacity:1}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes draw{0%{stroke-dashoffset:120;opacity:0}20%{opacity:1}50%{stroke-dashoffset:0}80%{opacity:1}to{stroke-dashoffset:120;opacity:0}}@media (prefers-reduced-motion: reduce){.loader *{animation:none!important}}.profile{padding:16px 16px 80px}.profile__loading,.profile__empty{padding:24px;text-align:center}.profile__header{display:grid;grid-template-columns:72px 1fr auto;gap:12px;align-items:center}.avatar{width:72px;height:72px;border-radius:50%;object-fit:cover;box-shadow:0 1px 4px #00000014}.avatar--placeholder{display:grid;place-items:center;background:#f3f4f6}.avatar-btn{border:none;background:transparent;padding:0;cursor:pointer}.profile__name{margin:0;font-size:20px}.profile__handle{color:#6b7280;font-size:12px}.profile__target{margin-top:2px;font-size:12px;color:#374151}.profile__stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:14px 0}.stat{background:#fff;border-radius:16px;padding:12px;box-shadow:0 1px 6px #0000000f;text-align:center}.stat__value{font-size:18px;font-weight:700}.stat__label{color:#6b7280;font-size:12px;margin-top:2px}.profile__section{margin-top:18px}.profile__section h2{margin:0 0 8px;font-size:16px}.profile__bio{background:#fff;border-radius:12px;padding:12px;min-height:48px;box-shadow:0 1px 4px #0000000a}.profile__links{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}.link{display:block;padding:10px 12px;background:#fff;border-radius:12px;box-shadow:0 1px 4px #0000000a;text-align:center}.toggle{display:flex;align-items:center;gap:8px;padding:10px 0}.toggle input{width:18px;height:18px}.btn{border-radius:10px;padding:8px 12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}.btn--primary{background:#3b82f6;color:#fff;border-color:#3b82f6}.modal{position:fixed;inset:0;display:grid;place-items:center;z-index:1000}.modal__backdrop{position:absolute;inset:0;background:#00000059}.modal__body{position:relative;z-index:1;width:min(92vw,520px);background:#fff;border-radius:16px;padding:16px;box-shadow:0 10px 30px #0003}.field{display:grid;gap:6px;margin:10px 0}.field input,.field select,.field textarea{padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;font-size:14px}.hint{text-align:right;color:#6b7280;font-size:11px}.auth-page{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;gap:40px;padding:20px}.auth-box{background-color:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 10px #0000001a;text-align:center;max-width:400px;width:100%}.auth-box h2{margin-bottom:16px}.auth-box input{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc}.auth-box button{margin-top:12px;padding:10px 20px;background-color:#4f9dff;color:#fff;border:none;border-radius:6px;cursor:pointer}.auth-box button:hover{background-color:#3a88e0}.login-container{max-width:400px;margin:80px auto;padding:30px;border-radius:12px;box-shadow:0 0 10px #0000001a;background-color:#f5f9ff;text-align:center}.login-container h2{font-size:24px;margin-bottom:20px}.login-container input{width:90%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid #ccc;font-size:16px}.login-container button{padding:10px 20px;font-size:16px;background-color:#4f9dff;color:#fff;border:none;border-radius:8px;cursor:pointer}.login-container button:hover{background-color:#3a88e0}.register-container{max-width:400px;margin:80px auto;padding:30px;border-radius:12px;box-shadow:0 0 10px #0000001a;background-color:#fff7f7;text-align:center}.register-container h2{font-size:24px;margin-bottom:20px}.register-container input{width:90%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid #ccc;font-size:16px}.register-container button{padding:10px 20px;font-size:16px;background-color:#ff6e6e;color:#fff;border:none;border-radius:8px;cursor:pointer}.register-container button:hover{background-color:#e85555}:root{-webkit-text-size-adjust:100%;text-size-adjust:100%}.tile{display:flex;flex-direction:column;align-items:center;gap:10px;padding:0;border:none;background:transparent;color:inherit;font:inherit;cursor:pointer;-webkit-tap-highlight-color:transparent}.tile:focus-visible{outline:none;box-shadow:var(--ring, 0 0 0 3px rgba(255,153,0,.35));border-radius:14px}.tile[disabled],.tile:disabled{cursor:not-allowed;opacity:.55}.tile-surface{width:clamp(68px,18vw,90px);aspect-ratio:1 / 1;display:grid;place-items:center;border-radius:18px;background:radial-gradient(100% 120% at 30% 20%,#0f3a32,#0b2a25 60%,#0a2320);box-shadow:0 10px 30px #00000059,inset 0 1px #ffffff0f;outline:2px solid #967d47;outline-offset:-2px;border:1px solid rgba(0,0,0,.35);transition:transform .15s ease,box-shadow .2s ease,outline-color .2s ease}@media (hover: hover) and (pointer: fine){.tile:hover .tile-surface{transform:translateY(-1px)}}.tile:active .tile-surface{transform:translateY(0);box-shadow:0 6px 18px #00000059,inset 0 1px #ffffff0a}.tile-ico{font-size:clamp(22px,6vw,28px);line-height:1;color:#eaf2ef}.tile-label{margin-top:2px;max-width:10ch;text-align:center;color:#fff;font-weight:700;font-size:clamp(12px,3.2vw,14px);line-height:1.2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;white-space:normal;word-break:keep-all}.tile-label br{display:inline}@media (max-width: 360px){.tile-surface{width:72px}.tile-ico{font-size:22px}.tile-label{font-size:12px;max-width:9.5ch}}@media (prefers-reduced-motion: reduce){.tile-surface{transition:none!important}}.home-wrap{padding:calc(20px + env(safe-area-inset-top)) 20px 20px;padding-top:max(28px,calc(20px + env(safe-area-inset-top)));max-width:1100px;margin:0 auto;min-height:100vh;box-sizing:border-box;overscroll-behavior-y:contain;--bottom-nav-h: 64px;padding-bottom:calc(20px + env(safe-area-inset-bottom) + var(--bottom-nav-h));background:var(--bg);color:var(--text)}.home-header{display:flex;justify-content:space-between;align-items:flex-start;gap:16px;margin-bottom:20px}.daily-message{font-size:1.1rem;font-weight:700;color:var(--text);line-height:1.35}.goal-meters{display:flex;flex-direction:column;gap:10px;min-width:180px;flex-shrink:0}.goal-card{background:var(--surface);padding:10px 12px;border-radius:12px;box-shadow:var(--shadow);border:1px solid var(--border)}.goal-card p{font-size:.9rem;margin:0 0 6px;color:var(--text)}.progress-bar{height:10px;background:var(--progress-bg, rgba(2,6,23,.08));border-radius:6px;overflow:hidden}.progress-fill{height:100%;width:0;background:var(--accent);transition:width .5s ease}.progress-fill.quiz{background:color-mix(in oklab,var(--accent) 60%,#ffb02e)}.goal-card span{font-size:.78rem;margin-top:6px;display:block;text-align:right;color:var(--text-muted)}.home-subtitle{margin:8px 0;color:var(--text)}.grid-four{display:grid;gap:16px;padding:8px 0 12px;grid-template-columns:repeat(4,minmax(0,1fr))}.grid-four .feature{-webkit-appearance:none;appearance:none;border:none;background:transparent;aspect-ratio:1 / 1;border-radius:12px;background:#0d1f1a;border:1.5px solid #d9b45e;box-shadow:0 4px 12px #00000073;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:10px;transition:transform .18s ease,box-shadow .18s ease,filter .18s ease;cursor:pointer;color:var(--text)}.grid-four .feature:hover{transform:translateY(-2px);box-shadow:0 7px 16px #0000008c}.grid-four .feature:focus-visible{outline:2px solid rgba(217,180,94,.7);outline-offset:2px}.grid-four .feature.is-disabled{opacity:.55;filter:saturate(.3) brightness(.95);cursor:default;pointer-events:none}.grid-four .feature .soon-badge{position:absolute;top:8px;right:8px;padding:2px 6px;font-size:11px;line-height:1;color:#ffd98a;background:#0000008c;border:1px solid #d9b45e;border-radius:6px;letter-spacing:.02em}.grid-four .feature .icon{font-size:clamp(22px,5vw,28px);line-height:1;color:currentColor}.grid-four .feature .label{font-size:clamp(12px,3.1vw,14px);font-weight:700;line-height:1.25;color:currentColor;text-align:center;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-clamp:2;overflow:hidden;white-space:normal;word-break:keep-all}@media (max-width: 360px){.grid-four{gap:12px}.grid-four .feature{border-radius:10px}.grid-four .feature .label{font-size:11.5px}}.cta-big{width:100%;margin:24px 0 calc(8vh + env(safe-area-inset-bottom));padding:18px 22px;font-weight:800;font-size:1rem;border:none;border-radius:16px;cursor:pointer;background:var(--accent)!important;color:#fff;box-shadow:0 8px 18px #00000029;transition:transform .2s ease,box-shadow .2s ease;-webkit-tap-highlight-color:transparent}.cta-big:hover{transform:translateY(-1px)}.cta-big:active{transform:translateY(0)}.section button{-webkit-tap-highlight-color:transparent}@media (prefers-reduced-motion: reduce){.progress-fill,.cta-big{transition:none}}.quiz-card{max-width:400px;margin:auto;padding:20px;border-radius:12px;background:#fff;box-shadow:0 0 10px #ccc;text-align:center}.quiz-options button{display:block;margin:10px auto;width:80%;padding:10px;font-size:16px;border-radius:8px;cursor:pointer}.correct{background-color:#90ee90}.wrong{background-color:salmon}.explanation{margin-top:15px;font-size:14px;color:#555}.quiz-page{padding:2rem;max-width:700px;margin:0 auto;text-align:center;font-family:Segoe UI,sans-serif}.quiz-page h2{font-size:1.8rem;margin-bottom:1.5rem;color:#333}.detail-overlay{position:fixed;inset:0;background:#0009;display:flex;justify-content:center;align-items:center;z-index:2000}.detail-modal{background:#fff;padding:20px;width:min(92vw,480px);max-height:85vh;border-radius:16px;overflow-y:auto;position:relative;box-shadow:0 8px 20px #00000040;font-family:Noto Sans JP,system-ui,-apple-system,Helvetica Neue,Arial,sans-serif;animation:fadeInUp .25s ease}.detail-modal::-webkit-scrollbar{width:8px}.detail-modal::-webkit-scrollbar-thumb{background:#e5e7eb;border-radius:8px}.detail-modal::-webkit-scrollbar-track{background:transparent}.detail-close{position:absolute;top:12px;right:12px;font-size:1.6rem;background:none;border:none;cursor:pointer;color:#333;line-height:1}.detail-close:hover{opacity:.85}.detail-close:focus-visible{outline:2px solid #60a5fa;border-radius:6px}.detail-header{text-align:center;margin-bottom:16px}.detail-kanji{font-size:2.4rem;font-weight:800;color:#222}.detail-reading{font-size:1.3rem;color:#444;margin-top:4px}.detail-pos,.detail-chip{display:inline-block;margin-top:8px;padding:4px 10px;background:#eef2ff;color:#374151;border-radius:8px;font-size:.9rem;font-weight:700}.detail-seg{display:flex;gap:10px;margin:8px 0 14px;justify-content:center}.detail-seg button{border:none;background:#f3f4f6;color:#111827;padding:6px 12px;border-radius:999px;font-size:14px;cursor:pointer}.detail-seg button.active{background:#dbeafe;color:#1f2937;font-weight:700}.detail-seg button:focus-visible{outline:2px solid #60a5fa}.detail-meanings{margin:16px 0;padding:12px;border:1px solid #e5e7eb;border-radius:8px;background:#fafafa}.detail-meaning{margin:6px 0;font-size:.95rem}.detail-meaning b{display:inline-block;min-width:3.2rem;color:#374151}.empty{color:#9ca3af;padding:8px 0}.detail-sentences{display:grid;gap:10px;margin-top:6px}.example-ja{margin:0;padding:10px 12px;border:1px solid #eee;border-radius:8px;background:#fdfdfd;line-height:1.85;font-size:15px;color:#111;word-break:break-word}.example-ja ruby rt{font-size:.8em;color:#6b7280}.example-ja u{text-underline-offset:2px}.detail-examples h3{margin-bottom:8px;font-size:1.1rem;border-bottom:2px solid #ddd;padding-bottom:4px}.example-block{margin-bottom:12px;padding:8px 12px;border:1px solid #eee;border-radius:6px;background:#fdfdfd}.example-block p{margin:2px 0;font-size:.9rem}.detail-conjugations h3{margin-top:14px;margin-bottom:8px;font-size:1.1rem;border-bottom:2px solid #ddd;padding-bottom:4px}.conj-table{display:grid;grid-template-columns:1fr;gap:6px}.conj-row{display:grid;grid-template-columns:8.5rem 1fr;gap:8px;align-items:start;padding:8px 10px;border:1px solid #eee;border-radius:6px;background:#fdfdfd}.conj-key{font-weight:700;color:#374151}.conj-val{word-break:break-word;line-height:1.7}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (prefers-reduced-motion: reduce){.detail-modal{animation:none}}@media (max-width: 360px){.detail-kanji{font-size:2.1rem}.detail-reading{font-size:1.1rem}.detail-modal{padding:16px}}@media (prefers-color-scheme: dark){.detail-modal{background:#0f172a;color:#e5e7eb;box-shadow:0 8px 24px #00000080}.detail-close{color:#e5e7eb}.detail-kanji{color:#f8fafc}.detail-reading{color:#cbd5e1}.detail-pos,.detail-chip{background:#1f2a44;color:#cbd5e1}.detail-seg button{background:#111827;color:#e5e7eb}.detail-seg button.active{background:#1d4ed8;color:#fff}.detail-meanings{background:#0b1225;border-color:#1f2a44}.detail-meaning b{color:#cbd5e1}.example-ja{background:#0b1225;border-color:#1f2a44;color:#e5e7eb}.example-ja ruby rt{color:#94a3b8}.detail-modal::-webkit-scrollbar-thumb{background:#334155}.conj-row{background:#0b1225;border-color:#1f2a44}.conj-key{color:#cbd5e1}}.word-card{width:min(92vw,360px);margin:20px auto;padding:18px 16px 20px;background:#f9f9f9;color:#000;border:2px solid #d9b45e;border-radius:14px;box-shadow:0 6px 16px #00000026;text-align:center;position:relative;font-family:Noto Sans JP,system-ui,-apple-system,Segoe UI,sans-serif}.wc-head{position:relative;height:36px;margin-bottom:8px}.wc-head-title{position:absolute;left:50%;top:0;transform:translate(-50%);height:36px;display:inline-flex;align-items:center;gap:8px;font-weight:700;color:#4b5563;letter-spacing:.2px}.lesson-title{line-height:36px}.wc-head-btn{position:absolute;top:0;height:36px;padding:0 12px;border-radius:10px;border:1px solid #1111;background:#111;color:#fff;font-weight:700;line-height:34px;cursor:pointer;transition:transform .12s ease,filter .15s ease,background .2s ease;-webkit-tap-highlight-color:transparent}.wc-head-btn:hover{transform:translateY(-1px)}.wc-head-btn:active{transform:translateY(0)}.wc-head-btn.left{left:0}.wc-head-btn.right{right:0}.wc-head-btn.right.is-added{background:#0f5132;border-color:#0f5132;box-shadow:0 0 0 2px #b6e3c6 inset}.pos-badge{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.85rem;font-weight:700;color:#fff;line-height:1;border:1px solid transparent;box-shadow:0 1px #0000000f inset,0 1px 6px #0000000f}.pos-badge.noun{background:#81c784;border-color:#6bbd72}.pos-badge.verb{background:#64b5f6;border-color:#52a6ec}.pos-badge.adj{background:#ffb74d;border-color:#f2a73a}.pos-badge.adv{background:#ba68c8;border-color:#ab59bb}.pos-badge.particle{background:#4db6ac;border-color:#44a79e}.pos-badge.counter{background:#f06292;border-color:#e65587}.pos-badge.default{background:#90a4ae;border-color:#8296a0}.kanji{font-size:2.2rem;font-weight:800;color:#222;margin:6px 0 2px}.reading{font-size:1.3rem;color:#444;margin-bottom:10px}.meaning-box{margin-top:14px;padding:12px;border:1px dashed #aaa;background:#fff;color:#333;border-radius:8px;cursor:pointer;transition:background .2s ease,border-color .2s ease}.meaning-box:hover{background:#f1f1f1}.icon-btn{display:inline-grid;place-items:center;width:40px;height:40px;padding:0;border:none;border-radius:10px;background:#00000014;color:#111;cursor:pointer;transition:transform .08s ease,background .15s ease,opacity .2s ease}.icon-btn:hover{background:#0000001f}.icon-btn:active{transform:translateY(1px) scale(.98)}.icon-btn:disabled{opacity:.55;cursor:not-allowed;transform:none}.audio-area{margin-top:12px}.audio-button{width:44px;height:44px;border-radius:12px;background:#0000000f}.audio-button:hover{background:#0000001f}.navigation{margin-top:18px;display:flex;gap:12px;justify-content:center;align-items:center}button:disabled{opacity:.55;color:#222!important;cursor:not-allowed;transform:none!important}@media (max-width: 360px){.word-card{padding:16px 12px 18px}.wc-head{height:34px}.wc-head-title{gap:6px}.wc-head-btn{height:34px;line-height:32px;padding:0 10px}.pos-badge{padding:3px 8px;font-size:.8rem}.kanji{font-size:2rem}.reading{font-size:1.1rem}}.word-page{max-width:700px;margin:2rem auto;padding:1rem;text-align:center;color:var(--text, #eaeaea)}.word-page-title{font-size:clamp(1.4rem,4vw,2rem);font-weight:700;margin-bottom:1.5rem;color:var(--accent, #f5d97a);text-shadow:0 1px 3px rgba(0,0,0,.5)}.error-text{color:#e74c3c;font-size:1rem;margin-top:2rem}.word-page .word-card{margin:0 auto}@media (max-width: 480px){.word-page{padding:.5rem}.word-page-title{font-size:1.4rem}}.result-container{max-width:500px;margin:40px auto;padding:30px;background-color:#fefefe;border-radius:20px;box-shadow:0 8px 25px #0000001a;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.result-title{font-size:2rem;margin-bottom:20px;color:#333}.score{font-size:1.5rem;color:#4caf50;margin-bottom:10px}.xp-earned{font-size:1.2rem;color:#2196f3;margin-bottom:10px}.level-info{font-size:1rem;color:#ff9800;margin-bottom:20px}.retry-button{padding:12px 24px;font-size:1rem;border:none;background-color:#4caf50;color:#fff;border-radius:10px;cursor:pointer;transition:background-color .3s ease}.retry-button:hover{background-color:#43a047}.celebrate-emoji{font-size:3rem;animation:pop .4s ease-out forwards}@keyframes pop{0%{transform:scale(.7);opacity:0}to{transform:scale(1.1);opacity:1}}.lvl-wrap{position:relative;min-height:100vh;background:#f5f9f8;padding:40px 20px;font-family:Segoe UI,sans-serif;text-align:center}.bg-decor{position:absolute;inset:0;background:radial-gradient(circle at top left,#d1fae5 0%,transparent 70%),radial-gradient(circle at bottom right,#bfdbfe 0%,transparent 70%);opacity:.3;pointer-events:none}.lvl-title{font-size:24px;font-weight:700;margin-bottom:30px;position:relative;z-index:1;color:#222}.lvl-list{display:flex;flex-direction:column;gap:15px;align-items:center;position:relative;z-index:1}.lvl-item{width:100%;max-width:350px;background:#fff;border:2px solid #ddd;border-radius:12px;padding:14px 18px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease}.lvl-item:hover{border-color:#10b981;box-shadow:0 4px 10px #0000000d}.lvl-item.is-checked{border-color:#10b981;box-shadow:0 4px 12px #10b98133}.lvl-item input[type=radio]{display:none}.radio{width:20px;height:20px;border:2px solid #bbb;border-radius:50%;display:inline-block;position:relative;flex-shrink:0}.lvl-item.is-checked .radio{border-color:#10b981}.lvl-item.is-checked .radio:after{content:"";position:absolute;top:50%;left:50%;width:10px;height:10px;background:#10b981;border-radius:50%;transform:translate(-50%,-50%)}.text{font-size:18px;color:#333;font-weight:500}.lesson-toolbar{display:flex;gap:8px;padding:8px 12px;position:sticky;top:56px;background:#fff;z-index:5}.toggle{flex:1;padding:10px;border-radius:999px;border:1px solid #e2e8f0;background:#f8fafc}.toggle.active{background:#21c7b8;color:#fff;border-color:#21c7b8}.lesson-blocks{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px}.lesson-block{text-align:left;padding:14px 16px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f;border:0}.blk-title{font-weight:700}.blk-sub{color:#64748b;font-size:12px;margin-top:2px}.settings-page{background:var(--bg);color:var(--text);min-height:100%;padding-bottom:64px}.settings__header{padding:20px 16px 8px}.settings__title{font-size:28px;font-weight:800;line-height:1.2;color:var(--text);margin:0 0 6px}.settings__subtitle{margin:0;color:var(--text-muted)}.settings__section{background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);margin:16px;overflow:hidden}.settings__sectionTitle{font-size:14px;letter-spacing:.08em;text-transform:uppercase;color:var(--text-muted);margin:12px 16px 8px}.settings__group{margin:8px 0 12px}.settings__row{display:flex;align-items:center;justify-content:space-between;width:100%;padding:14px 16px;background:var(--surface);color:var(--text);border-top:1px solid var(--border)}.settings__row:first-child{border-top:none}.settings__row:hover{background:var(--surface-2)}.settings__rowLeft{display:flex;align-items:center;gap:12px}.settings__icon{font-size:20px;line-height:1;color:var(--text)}.settings__labelBlock{display:flex;flex-direction:column}.settings__label{font-size:16px;color:var(--text)}.settings__desc{font-size:12px;color:var(--text-muted);margin-top:2px}.settings__rowRight{display:flex;align-items:center;gap:8px;color:var(--text-muted)}.settings__chevron,.settings__value{color:var(--text-muted)}.switch{position:relative;display:inline-block;width:52px;height:30px}.switch input{display:none}.slider{position:absolute;inset:0;background:var(--surface-2);border:1px solid var(--border);border-radius:999px;transition:background .2s,border-color .2s}.slider:before{content:"";position:absolute;width:22px;height:22px;left:4px;top:50%;transform:translateY(-50%);background:var(--surface);border:1px solid var(--border);border-radius:50%;transition:transform .2s;box-shadow:var(--shadow)}.switch input:checked+.slider{background:color-mix(in oklab,var(--accent) 18%,transparent);border-color:color-mix(in oklab,var(--accent) 40%,var(--border))}.switch input:checked+.slider:before{transform:translate(22px,-50%);background:#fff}.settings__footer{padding:24px 16px 40px;color:var(--text-muted);text-align:center}.settings__version{margin-bottom:12px}.settings__logout{display:inline-flex;align-items:center;gap:6px;padding:10px 14px;border-radius:12px;background:var(--surface-2);color:var(--text);border:1px solid var(--border)}.settings__logout:active{transform:translateY(1px)}.settings-page *{-webkit-tap-highlight-color:rgba(0,0,0,0)}.language-settings{padding:24px;text-align:center;max-width:720px;margin:0 auto}.language-settings h2{font-size:26px;margin-bottom:24px;color:#fff;font-weight:700}.language-settings ul{list-style:none;padding:0;margin:0}.language-settings li{margin:12px 0}.language-settings button{width:80%;max-width:520px;padding:14px 18px;font-size:18px;font-weight:700;border-radius:12px;border:1px solid rgba(255,255,255,.16);background-color:#2d2f34;color:#fff;cursor:pointer;transition:background-color .25s ease,transform .06s ease,box-shadow .25s ease;box-shadow:0 2px 10px #00000040}@media (hover: hover) and (pointer: fine){.language-settings button:hover{background-color:#3a8bea;box-shadow:0 4px 16px #3a8bea59;transform:translateY(-1px)}}.language-settings button:active{transform:translateY(0);background-color:#2f79cc}.language-settings button:focus-visible{outline:3px solid #70b7ff;outline-offset:2px}.language-settings button.active{background-color:#2f79cc;border-color:#ffffff38;box-shadow:0 0 0 3px #70b7ff40 inset}@media (prefers-color-scheme: light){.language-settings h2{color:#222}.language-settings button{background-color:#f5f7fb;color:#1c2333;border-color:#00000014;box-shadow:0 2px 10px #00000014}.language-settings button.active{background-color:#e6f1ff;box-shadow:0 0 0 3px #3a8bea2e inset}}@media (max-width: 480px){.language-settings button{width:92%;font-size:17px;padding:14px}}.mybook-wrap,.mywb-wrap{max-width:820px;margin:20px auto;padding:0 16px}.mybook-wrap h2,.mywb-wrap .mywb-title{font-size:1.6rem;margin:8px 0 16px;font-weight:800}.empty,.mywb-empty{opacity:.75;margin:24px 0}.mybook-list,.mywb-grid,.mywb-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;list-style:none;padding:0;margin:0}.mybook-item,.mywb-item{background:var(--surface, #f9f9f9);border:1px solid var(--color-border, rgba(0,0,0,.12));border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:8px;color:var(--fg, #111);box-shadow:0 6px 16px #0000000f}@media (prefers-color-scheme: dark){.mybook-item,.mywb-item{background:var(--surface, #1c1f26);border-color:var(--color-border, rgba(255,255,255,.1));color:var(--fg, #eee);box-shadow:0 6px 16px #00000040}}.kanji,.mywb-kanji{font-size:1.7rem;font-weight:800;margin-bottom:6px}.readings,.mywb-reading{font-weight:600;opacity:.9}.meanings{font-size:.95rem;opacity:.9;margin-top:6px}.meta,.mywb-meta{font-size:.8rem;opacity:.65;margin-top:4px;display:flex;gap:6px;flex-wrap:wrap}.mywb-tag{padding:2px 8px;border-radius:999px;border:1px solid var(--color-border, rgba(0,0,0,.15));background:#0000000a}@media (prefers-color-scheme: dark){.mywb-tag{border-color:#ffffff2e;background:#ffffff0f}}.actions,.mywb-actions{display:flex;align-items:center;gap:8px;margin-top:6px}.btn,.mywb-remove,.mywb-clear{border:1px solid rgba(0,0,0,.15);background:transparent;color:inherit;border-radius:10px;padding:6px 10px;cursor:pointer;transition:background .15s ease,border-color .15s ease,transform .05s ease}@media (prefers-color-scheme: dark){.btn,.mywb-remove,.mywb-clear{border-color:#ffffff26}}.btn:hover,.mywb-remove:hover,.mywb-clear:hover{background:#0000000f;transform:translateY(-1px)}@media (prefers-color-scheme: dark){.btn:hover,.mywb-remove:hover,.mywb-clear:hover{background:#ffffff14}}.btn.danger,.mywb-remove{border-color:#ff000040}.btn.danger:hover,.mywb-remove:hover{background:#ff000014}.mywb-clear{width:100%;margin-top:8px}.rk{padding:16px}.rk__header h1{margin:0 0 4px;font-size:20px}.rk__sub{margin:0 0 12px;color:#6b7280;font-size:13px}.rk__loading,.rk__empty,.rk__mehint{color:#6b7280;font-size:14px;padding:12px 0}.rk__list{list-style:none;margin:0;padding:0;display:grid;gap:8px}.rk__row{display:grid;grid-template-columns:40px 40px 1fr auto;align-items:center;gap:10px;padding:10px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}.rk__row.is-me{outline:2px solid rgba(59,130,246,.25);background:#f8fbff}.rk__row.is-top1{border-color:#f59e0b}.rk__row.is-top2{border-color:#9ca3af}.rk__row.is-top3{border-color:#d97706}.rk__rank{font-weight:700;text-align:center;color:#111827}.rk__avatar{width:40px;height:40px;border-radius:9999px;overflow:hidden;background:#f3f4f6;display:grid;place-items:center}.rk__avatar img{width:100%;height:100%;object-fit:cover}.rk__avatarPh{font-weight:700;color:#6b7280}.rk__meta{min-width:0}.rk__name{font-weight:600;color:#111827}.rk__submeta{color:#6b7280;font-size:12px}.rk__xp{display:flex;align-items:baseline;gap:4px}.rk__xpNum{font-weight:700}.rk__xpUnit{color:#6b7280;font-size:12px}.rk__more{display:flex;justify-content:center;padding:12px 0 4px}.btn{border:1px solid #e5e7eb;background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer}.btn:disabled{opacity:.6;cursor:default}:root{--teal:#35b4a6;--teal-dark:#2f997f;--bg:#f3f4f6;--card:#ffffff;--text:#2b2b2b;--muted:#9aa0a6;--shadow:0 6px 16px rgba(0,0,0,.08)}.alpha-page{background:var(--bg);min-height:100vh;padding:12px 14px 80px;box-sizing:border-box}.alpha-header{display:flex;justify-content:space-between;align-items:center;margin:6px 4px 12px}.alpha-header h1{font-size:20px;color:#fff;background:var(--teal);padding:6px 12px;border-radius:12px}.segment{background:var(--teal-dark);border-radius:999px;padding:3px;display:flex;gap:4px}.seg-btn{min-width:66px;padding:8px 12px;border:0;border-radius:999px;background:transparent;color:#e9fffb;font-weight:600;cursor:pointer}.seg-btn.active{background:#e7fbf7;color:var(--teal-dark)}.unit-list{display:flex;flex-direction:column;gap:12px}.unit-card{background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:14px 16px;display:flex;justify-content:space-between;align-items:center}.unit-card.locked{opacity:.72}.unit-card:active{transform:translateY(1px)}.unit-left{display:flex;flex-direction:column;gap:6px}.unit-title{color:#7a7f85;font-weight:700;margin-bottom:2px}.row{font-size:16px;letter-spacing:.08em}.row.primary{color:var(--text)}.row.secondary{color:var(--muted)}.unit-right{display:flex;align-items:center}.unit-icon{font-size:20px;color:#b9c0c5}.go-btn{width:38px;height:38px;display:grid;place-items:center;background:var(--teal);color:#fff;border-radius:999px;box-shadow:var(--shadow)}.cta-wrap{position:sticky;bottom:68px;display:flex;justify-content:center;margin-top:10px;margin-bottom:6px}.cta-pill{border:0;cursor:pointer;background:var(--teal);color:#fff;font-weight:800;letter-spacing:.08em;padding:14px 22px;border-radius:999px;box-shadow:var(--shadow)}.ad-slot{height:64px;background:#e8eaed;border-radius:12px;margin-top:8px}@media (min-width: 768px){.alpha-page{padding:16px 24px 120px}.row{font-size:18px}.unit-card{padding:16px 20px}}.alphabet-lesson{padding:1rem;font-size:1.2rem}.trace-wrap{margin:0 auto}.trace-toolbar{display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem;flex-wrap:wrap}.trace-toolbar label{display:flex;align-items:center;gap:.25rem;font-size:.9rem}.trace-toolbar input[type=range]{width:120px}.trace-stage{border:1px solid #e5e5e5;border-radius:12px;overflow:hidden;background:#fff}.trace-base{pointer-events:none}.quiz-wrap{text-align:center;color:#fff;background-color:#242424;min-height:100vh;padding:2rem}.counter{opacity:.8}.question{margin:1rem auto .5rem;max-width:720px;line-height:1.9;font-size:1.4rem}.quiz-wrap ruby,.quiz-wrap rb,.quiz-wrap rt,.quiz-wrap span{color:#fff!important}.quiz-wrap ruby{ruby-position:over}.quiz-wrap rt{font-size:.6em;opacity:.9;letter-spacing:.02em}.choices{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem auto;max-width:540px}.choice-btn{background:#333;border:1px solid #646cff;border-radius:12px;padding:.9rem 1rem;font-size:1.15rem;color:#fff;cursor:pointer;transition:transform .12s,background .2s,box-shadow .2s}.choice-btn:hover{background:#535bf2;transform:translateY(-1px)}.choice-btn.correct{background:#2e8b57;box-shadow:0 0 10px #2e8b5799}.choice-btn.wrong{background:#b22222;box-shadow:0 0 10px #b2222299}.judge-overlay{position:fixed;inset:0;display:grid;place-items:center;pointer-events:none;z-index:50}.judge-circle{width:180px;height:180px;filter:drop-shadow(0 0 12px rgba(100,108,255,.7))}.judge-circle .ring,.judge-circle .ring2{fill:none;stroke:#6a6fff;stroke-width:10;stroke-linecap:round;stroke-dasharray:283;stroke-dashoffset:283;transform-origin:60px 60px;animation:draw-circle .5s ease-out forwards,pop .5s ease-out forwards}.judge-circle .ring2{stroke:#9aa0ff;stroke-width:6;stroke-dasharray:188;stroke-dashoffset:188;animation-delay:.05s}@keyframes draw-circle{to{stroke-dashoffset:0}}@keyframes pop{0%{transform:scale(.9)}60%{transform:scale(1.05)}to{transform:scale(1)}}.judge-cross{width:180px;height:180px;filter:drop-shadow(0 0 12px rgba(255,90,90,.7))}.judge-cross .bar1,.judge-cross .bar2{stroke:#ff5a5a;stroke-width:12;stroke-linecap:round;stroke-dasharray:85;stroke-dashoffset:85;animation:draw-line .35s ease-out forwards,shake .5s ease-out forwards}.judge-cross .bar2{animation-delay:.08s,.08s}@keyframes draw-line{to{stroke-dashoffset:0}}@keyframes shake{0%{transform:translate(0)}35%{transform:translate(-2px)}70%{transform:translate(2px)}to{transform:translate(0)}}.quiz-toolbar{display:flex;gap:8px;justify-content:flex-end;margin:8px 0 12px}.choice-btn.ghost{background:transparent;border:1px solid var(--fg-muted, #7aa);opacity:.9}.choice-btn.ghost:disabled{opacity:.5;cursor:not-allowed}.blank{display:inline-block;min-width:3em;border-bottom:2px dashed #888;padding:0 4px}.blank.blink{animation:blank-glow .4s ease-out}@keyframes blank-glow{0%{background:#6a6fff00;box-shadow:0 0 #6a6fff00;transform:scale(1)}40%{background:#6a6fff33;box-shadow:0 0 10px #6a6fff99;transform:scale(1.03)}to{background:#6a6fff00;box-shadow:0 0 #6a6fff00;transform:scale(1)}}.grid{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-top:2rem}.grammar-btn{flex:0 0 calc(50% - 1rem);box-sizing:border-box;background:linear-gradient(135deg,#646cff,#535bf2);border:none;border-radius:12px;color:#fff;padding:1rem 2rem;font-size:1.1rem;font-weight:500;cursor:pointer;transition:transform .2s,box-shadow .2s,filter .2s;min-width:120px}@media (max-width: 600px){.grammar-btn{flex:0 0 100%}}.grammar-btn--level{position:relative;padding:1rem 1.1rem .9rem;background:linear-gradient(135deg,#5c5cff,#6f65ff);color:#f6fbff;border-radius:16px;border:1px solid rgba(255,255,255,.08);text-align:left}.gbtn-row{display:flex;justify-content:space-between;align-items:baseline;gap:.75rem}.gbtn-label{font-weight:800;font-size:1.05rem;letter-spacing:.02em}.gbtn-badge{font-weight:700;font-size:.9rem;color:#eaf1ff}.gbtn-badge .gbtn-pct{opacity:.9;margin-left:.15rem}.gbtn-meter{height:8px;border-radius:999px;background:#ffffff2e;overflow:hidden;margin-top:.55rem}.gbtn-fill{height:100%;width:0%;background:#fff;transition:width .35s ease}:root{--wc-bg: var(--bg);--wc-card: var(--surface);--wc-border: var(--border);--wc-text: var(--text);--wc-muted: var(--text-muted);--wc-shadow: var(--shadow);--wc-accent: var(--accent);--wc-info: var(--info);--wc-danger: var(--danger)}.wordcard{background:var(--wc-card);color:var(--wc-text);border:1px solid var(--wc-border);border-radius:14px;box-shadow:var(--wc-shadow);padding:16px 14px}.wordcard__meta{display:flex;gap:10px;align-items:center;margin-bottom:8px;color:var(--wc-muted);font-size:.92rem;line-height:1.5}.wordcard__tag{border:1px solid var(--wc-border);border-radius:999px;padding:3px 8px;background:transparent}.wordcard__kanji{font-size:1.6rem;line-height:1.2;font-weight:700;color:var(--wc-text)}.wordcard__reading{margin-top:4px;color:var(--wc-muted)}.wordcard__reading .label{color:var(--wc-info);font-weight:600;margin-right:6px}.wordcard__meanings{margin-top:10px;color:var(--wc-text)}.wordcard__meanings .lang{color:var(--wc-muted);font-size:.92rem}.wordcard__actions{display:flex;gap:10px;align-items:center;margin-top:14px}.button{border:1px solid var(--wc-border);background:var(--wc-card);color:var(--wc-text);border-radius:10px;padding:8px 12px;font-weight:600;transition:background .2s ease,transform .08s ease,box-shadow .2s ease}.button:hover{background:color-mix(in oklab,var(--wc-text) 6%,var(--wc-card))}.button:active{transform:translateY(1px)}.button--primary{background:var(--wc-accent);color:#fff;border-color:transparent}.button--danger{background:color-mix(in oklab,var(--wc-danger) 85%,#0000);color:#fff;border-color:transparent}.icon-btn{display:inline-flex;align-items:center;gap:6px;color:var(--wc-text)}.icon-btn svg{width:20px;height:20px;fill:currentColor}.wordcard__footer{margin-top:10px;color:var(--wc-muted)}.progress{height:6px;border-radius:999px;background:color-mix(in oklab,var(--wc-text) 10%,transparent);overflow:hidden}.progress>span{display:block;height:100%;background:var(--wc-accent);border-radius:inherit}@media (max-width: 420px){.wordcard{padding:14px 12px}}.rh-wrap{display:flex;align-items:center;gap:10px;padding:10px 12px;position:sticky;top:0;z-index:10;background:#0b0c0d}.rh-back,.rh-flag{width:36px;height:36px;border-radius:999px;border:none;display:flex;align-items:center;justify-content:center;background:transparent;color:#e9f0ee;font-size:24px}.rh-flag{color:#ff4d4f}.rh-track{flex:1;height:10px;background:#1c2a21;border-radius:999px;overflow:hidden}.rh-fill{height:100%;background:#1ecf7a}.rh-page{color:#e9f0ee;font-weight:600;min-width:60px;text-align:center}.sc-card{background:#1f1f1f;border-radius:18px;padding:16px 18px 14px;margin:16px 16px 12px;box-shadow:0 4px 18px #00000059}.sc-image{border-radius:14px;overflow:hidden;background:#111;margin-bottom:14px}.sc-image img{width:100%;display:block;border-radius:12px}.sc-text{font-size:28px;line-height:1.6;color:#f3f3f3;word-break:keep-all}.sc-text ruby rt{font-size:.5em;color:#c9c9c9}.sc-word{position:relative;padding:0 .04em;cursor:pointer;border-bottom:3px solid #3f6ef3}.sc-word:active{transform:translateY(1px);opacity:.9}.sc-tr{margin-top:10px;color:#cfcfcf;font-size:15px}:root{--ba-bg: rgba(30, 30, 30, .95);--ba-btn-bg: #222;--ba-btn-bg-hover: #333;--ba-primary: #e74c3c;--ba-ok: #2ecc71;--ba-active: #2563eb;--ba-shadow: 0 8px 24px rgba(0,0,0,.35);--ba-icon-size: 22px}@media (prefers-color-scheme: light){:root{--ba-bg: rgba(255, 255, 255, .96);--ba-btn-bg: #f3f4f6;--ba-btn-bg-hover: #e5e7eb;--ba-shadow: 0 8px 24px rgba(0,0,0,.08)}}.ba-wrap{position:fixed;left:0;right:0;bottom:0;display:flex;justify-content:center;padding:12px 12px calc(12px + env(safe-area-inset-bottom,0px));z-index:1000;pointer-events:none}.ba-pill{pointer-events:auto;display:flex;gap:12px;background:var(--ba-bg);padding:8px 14px;border-radius:999px;box-shadow:var(--ba-shadow);backdrop-filter:saturate(140%) blur(6px)}.ba-btn{width:44px;height:44px;border-radius:50%;border:none;background:var(--ba-btn-bg);color:#111;display:inline-flex;align-items:center;justify-content:center;font-size:var(--ba-icon-size);transition:transform .1s ease,background .15s ease,box-shadow .15s ease;outline:none}@media (prefers-color-scheme: dark){.ba-btn{color:#fff}}.ba-btn:hover{background:var(--ba-btn-bg-hover);transform:scale(1.05)}.ba-btn:active{transform:scale(.96)}.ba-btn:focus-visible{box-shadow:0 0 0 3px #2563eb59}.ba-btn.ba-primary{background:var(--ba-primary);color:#fff}.ba-btn.ba-ok{background:var(--ba-ok);color:#fff}.ba-btn.ba-active{background:var(--ba-active);color:#fff}.ba-btn.ba-ring{background:transparent;color:inherit;box-shadow:inset 0 0 0 2px #78787880}.ba-btn.ba-ring:hover{box-shadow:inset 0 0 0 2px #787878cc}.ba-safezone{height:env(safe-area-inset-bottom,0px)}.wp-overlay{position:fixed;inset:0;background:#0000008c;display:flex;align-items:flex-end;z-index:1000}.wp-sheet{width:100%;max-height:78vh;overflow-y:auto;background:#1c151f;color:#f3f3f3;border-top-left-radius:18px;border-top-right-radius:18px;padding:10px 14px 22px;animation:wp-rise .16s ease-out;box-shadow:0 -10px 30px #00000080}@keyframes wp-rise{0%{transform:translateY(32px);opacity:.95}to{transform:translateY(0);opacity:1}}.wp-handle{width:46px;height:4px;border-radius:999px;background:#fff2;margin:6px auto 10px}.wp-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px}.wp-title{display:flex;align-items:baseline;gap:8px}.wp-word{font-size:22px;font-weight:800}.wp-romaji{color:#91a3b0;font-size:14px}.wp-actions{display:flex;gap:6px}.wp-icon{width:34px;height:34px;border-radius:999px;border:none;background:#2a2d2f;color:#e9f0ee;cursor:pointer}.wp-tags{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0 8px}.wp-tag{background:#6d4bc7;color:#fff;padding:2px 8px;border-radius:10px;font-size:12px;font-weight:700}.wp-content{padding-bottom:8px}.wp-section{margin:12px 0}.wp-section h4{margin:0 0 8px;color:#c7d0d9;font-size:13px;letter-spacing:.4px}.wp-list{margin:0;padding-left:18px}.wp-grid{display:grid;grid-template-columns:1fr;gap:8px}@media (min-width: 540px){.wp-grid{grid-template-columns:1fr 1fr}}.wp-card{background:#3d2759;border-radius:12px;padding:12px;color:#fff;margin:8px 0}.wp-ex-jp{font-size:16px;margin-bottom:4px}.wp-ex-en{font-size:14px;color:#d7e0e6}.wp-empty{opacity:.8;text-align:center;padding:18px 0}:root{--bg:#111;--card:#1a1a1b;--card2:#171717;--text:#eee;--muted:#b8b8b8;--green:#22c55e;--green-weak:#1faa55;--red:#ff5757;--gold:#ffcc00;--blue:#4da6ff;--purple:#9b59b6;--yellow:#f4c542}.reader-hub{background:#0f0f10;color:var(--text);min-height:100vh;padding-bottom:24px}.stage.stage--compact{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.06)}.stage-left{display:flex;align-items:center;gap:10px}.stage-label{font-size:18px;font-weight:700}.percent-pill{font-size:12px;padding:4px 8px;border-radius:8px;background:#2a2a2b;color:#ddd}.stage-right{display:flex;align-items:center;gap:6px}.stage .chev{opacity:.8}.level-section{padding:10px 12px 4px}.level-head{display:flex;align-items:center;justify-content:space-between;gap:12px}.level-title{display:flex;align-items:center;gap:12px}.level-title h2{font-size:26px;letter-spacing:.2px}.lock-hint-inline{display:flex;align-items:center;gap:8px;color:#cfcfcf88;font-size:14px}.progress-dots{display:flex;gap:6px}.progress-dots .dot{width:10px;height:10px;border-radius:50%;background:var(--green);opacity:.95}.cards-row{display:flex;gap:14px;overflow-x:auto;padding:12px 2px 8px;contain:layout paint;transform:translateZ(0);-webkit-transform:translateZ(0)}.cards-row::-webkit-scrollbar{height:6px}.cards-row::-webkit-scrollbar-thumb{background:#2a2a2b;border-radius:8px}.story-card{width:260px;min-width:260px;background:var(--card);border-radius:18px;box-shadow:0 1px #ffffff0a,0 12px 24px #00000059;overflow:hidden;cursor:pointer;position:relative;will-change:transform,opacity;transform:translateZ(0);backface-visibility:hidden}.story-card.locked{cursor:default;opacity:.92}.story-card:after{content:"";position:absolute;inset:0;background:#fff0;transition:background .15s ease}.story-card:hover:after{background:#ffffff0f}.card-image img{display:block;width:100%;height:160px;object-fit:cover;backface-visibility:hidden;transform:translateZ(0)}.card-body{padding:10px 12px 14px;background:var(--card2)}.meta-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.tag{color:#cfcfcf;font-size:13px}.lockmark{color:#cfcfcfb2}.card-title{font-size:16px;font-weight:700;line-height:1.35;margin:2px 0 6px;color:#eee}.time{color:#bcbcbc;font-size:12px}.story-wrap{background:#0b0c0d;min-height:100vh;display:flex;flex-direction:column;padding-bottom:120px;box-sizing:border-box;font-family:Helvetica Neue,Arial,sans-serif}.story-header{background:#0b0c0d;padding:8px 12px;display:flex;align-items:center}.story-content{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:16px}.pager{text-align:center;font-size:16px;font-weight:600;color:#e9f0ee;margin-top:12px;margin-bottom:20px}.toggles{display:flex;justify-content:center;gap:16px;margin:10px 0;color:#cfd8dc;font-size:14px}.toggles input{margin-right:4px}
