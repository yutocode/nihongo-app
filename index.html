<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    
    <!-- 端末の自動ダーク化を止める（ライト時） -->
    <meta id="meta-color-scheme" name="color-scheme" content="light">

    <!-- Safari のアドレスバー色。JSで書き換える前提の固定タグ -->
    <meta id="meta-theme-color" name="theme-color" content="#ffffff">
    
    <!-- iPhone / Safari 最適化 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="format-detection" content="telephone=no,email=no,address=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="日本語学習アプリ" />

    <!-- 基本情報 -->
    <meta name="application-name" content="日本語学習アプリ" />
    <meta name="description" content="日本語学習アプリ（単語・文法クイズ・聴解など）" />

    <!-- テーマカラー（起動後は main.jsx が動的更新） -->
    <meta name="theme-color" content="#f7f8fa" />

    <!-- PWA（相対パス） -->
    <link rel="manifest" href="./manifest.webmanifest" />

    <!-- アイコン -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-touch-icon-180.png" />
    <meta name="msapplication-TileColor" content="#2d89ef" />

    <title>日本語学習アプリ</title>

    <!-- 初期ペイント用の安全なテーマ変数（Theme.css 到着までのFOUC防止） -->
    <style>
      :root {
        color-scheme: light dark;
        /* Light 初期値（Theme.css と整合） */
        --bg: #f7f8fa;
        --text: #111318;
      }
      @media (prefers-color-scheme: dark) {
        :root {
          /* Dark 初期値（Theme.css と整合） */
          --bg: #0b0f14;
          --text: #e6edf3;
        }
      }

      html, body, #root { height: 100%; }
      html { -webkit-text-size-adjust: 100%; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Noto Sans JP", "Roboto", sans-serif;
        background: var(--bg);
        color: var(--text);
        padding-left:  max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-top:   max(0px, env(safe-area-inset-top));
        padding-bottom:max(0px, env(safe-area-inset-bottom));
      }
      #root {
        min-height: 100dvh;
        min-height: calc(var(--vh) * 100);
        display: contents;
      }

      .app-loading {
        position: fixed; inset: 0; display: grid; place-items: center;
        background: var(--bg); color: var(--text);
        z-index: 9999; font-size: 14px;
      }
      [hidden] { display: none !important; }
    </style>
    <script type="module" crossorigin src="/nihongo-app/assets/index-D0ESsb_G.js"></script>
    <link rel="modulepreload" crossorigin href="/nihongo-app/assets/react-kJzwxFS_.js">
    <link rel="modulepreload" crossorigin href="/nihongo-app/assets/firebase-DhpGZtIx.js">
    <link rel="modulepreload" crossorigin href="/nihongo-app/assets/i18n-BXC4prgf.js">
    <link rel="stylesheet" crossorigin href="/nihongo-app/assets/index-BiQTo5hj.css">
  </head>

  <body>
    <div id="app-loading" class="app-loading" hidden>Loading…</div>
    <div id="root"></div>

    <!-- 古いAndroidの100vh問題フォールバック -->
    <script>
      (function () {
        var setVh = function () {
          var vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty('--vh', vh + 'px');
        };
        setVh();
        window.addEventListener('resize', setVh);
        window.addEventListener('orientationchange', setVh);
      }());
    </script>

    <!-- ✅ Vite エントリ -->
  </body>
</html>
