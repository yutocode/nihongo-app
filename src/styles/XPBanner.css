.xp-banner{
  display:flex;
  align-items:center;
  gap:var(--space-3);
  padding:var(--space-3);
  border:1px solid var(--color-border-subtle);
  border-radius:var(--radius-4);
  background:var(--color-bg-elev);
  box-shadow:var(--shadow-1);
}

.xp-banner.is-compact{
  padding:var(--space-2);
  border-radius:var(--radius-3);
}

.xp-main{display:flex; flex-direction:column; gap:var(--space-2); width:100%;}
.xp-row{display:flex; align-items:center; gap:var(--space-3);}

.xp-title{display:flex; align-items:center; gap:var(--space-2); min-width:0;}
.xp-levelchip{
  display:inline-flex; align-items:center; justify-content:center;
  padding:0 var(--space-2);
  height:calc(var(--space-6));
  border:1px solid var(--color-border-subtle);
  border-radius:var(--radius-2);
  font-weight:700;
  line-height:1;
}

.xp-numbers{
  margin-left:auto;
  display:inline-flex; align-items:baseline; gap:var(--space-1);
  font-variant-numeric: tabular-nums;
}

.xp-num, .xp-den{font-weight:700;}
.xp-per{opacity:.8;}
.xp-split{opacity:.7;}

.xp-rail{
  position:relative;
  width:100%;
  height:calc(var(--space-2));
  border-radius:9999px;
  background:var(--color-surface-1);
  border:1px solid var(--color-border-subtle);
  overflow:hidden;
}

.xp-fill{
  height:100%;
  border-radius:inherit;
  background:var(--color-accent, var(--color-primary));
  transform:translateZ(0);
  transition:width var(--dur, 180ms) cubic-bezier(.2,.8,.2,1);
  position:relative;
}

.xp-shine{
  position:absolute; inset:0; pointer-events:none;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  mix-blend-mode:overlay;
  animation:xpShine var(--motion-normal, 1800ms) linear infinite;
  opacity:.25;
}

@keyframes xpShine{
  0%{ transform:translateX(-100%); }
  100%{ transform:translateX(100%); }
}

/* LevelUp ポップ（控えめ） */
.levelup-pop{
  margin-left:auto;
  padding:0 var(--space-2);
  height:calc(var(--space-6));
  display:flex; align-items:center; justify-content:center;
  border-radius:var(--radius-2);
  border:1px solid var(--color-border-subtle);
  background:var(--color-surface-1);
  box-shadow:var(--shadow-1);
  font-weight:700;
  animation:popIn var(--motion-fast, 180ms) cubic-bezier(.2,.8,.2,1);
}

@keyframes popIn{
  from{ transform:scale(.96); opacity:0; }
  to{ transform:scale(1); opacity:1; }
}

[data-theme="dark"] .xp-banner{
  border-color:var(--color-border);
}
[data-theme="dark"] .levelup-pop{
  border-color:var(--color-border);
}
