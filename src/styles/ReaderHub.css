/* ======= カラートークン ======= */
:root{
  --bg:#111; --card:#1a1a1b; --card2:#171717; --text:#eee; --muted:#b8b8b8;
  --green:#22c55e; --green-weak:#1faa55; --red:#ff5757; --gold:#ffcc00; --blue:#4da6ff;
  --purple:#9b59b6; --yellow:#f4c542;
}

/* ベース */
.reader-hub{ background:#0f0f10; color:var(--text); min-height:100vh; padding-bottom:92px; }

/* ======= ① ステータスバー ======= */
.stats-bar{
  display:flex; gap:14px; padding:10px 16px; align-items:center;
  position:sticky; top:0; z-index:5; background:linear-gradient(#141415, #111);
  -webkit-backdrop-filter:none; backdrop-filter:none; border-bottom:1px solid rgba(255,255,255,.05);
}
.stat-pill{
  display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px;
  background:#202022; color:#8aa; font-weight:700; font-size:14px;
}
.stat-pill.red{ color:#ffc1c1; }
.stat-pill.green{ color:#c1ffd8; }
.stat-pill.gold{ color:#ffe8a3; }
.stat-pill .num{ font-variant-numeric:tabular-nums; }

/* ======= ② ステージ（Beginner） ======= */
.stage.stage--compact{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px; border-bottom:1px solid rgba(255,255,255,.06);
}
.stage-left{ display:flex; align-items:center; gap:10px; }
.stage-label{ font-size:18px; font-weight:700; }
.percent-pill{
  font-size:12px; padding:4px 8px; border-radius:8px; background:#2a2a2b; color:#ddd;
}
.stage-right{ display:flex; align-items:center; gap:6px; }
.stage .chev{ opacity:.8; }

/* ======= ③ レベル見出し行 ======= */
.level-section{ padding:10px 12px 4px; }
.level-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.level-title{ display:flex; align-items:center; gap:12px; }
.level-title h2{ font-size:26px; letter-spacing:.2px; }
.lock-hint-inline{ display:flex; align-items:center; gap:8px; color:#cfcfcf88; font-size:14px; }
.progress-dots{ display:flex; gap:6px; }
.progress-dots .dot{ width:10px; height:10px; border-radius:50%; background:var(--green); opacity:.95; }

/* ======= ④ カード行（点滅対策含む） ======= */
.cards-row{
  display:flex; gap:14px; overflow-x:auto; padding:12px 2px 8px;
  contain:layout paint; transform:translateZ(0); -webkit-transform:translateZ(0);
}
.cards-row::-webkit-scrollbar{ height:6px; }
.cards-row::-webkit-scrollbar-thumb{ background:#2a2a2b; border-radius:8px; }

/* ======= ⑤ ストーリーカード ======= */
.story-card{
  width:260px; min-width:260px; background:var(--card); border-radius:18px;
  box-shadow:0 1px 0 rgba(255,255,255,.04), 0 12px 24px rgba(0,0,0,.35);
  overflow:hidden; cursor:pointer; position:relative;
  will-change:transform, opacity; transform:translateZ(0); backface-visibility:hidden;
}
.story-card.locked{ cursor:default; opacity:.92; }
.story-card::after{ /* hoverの明暗をオーバーレイで（filter禁止） */
  content:""; position:absolute; inset:0; background:rgba(255,255,255,0); transition:background .15s ease;
}
.story-card:hover::after{ background:rgba(255,255,255,.06); }

.card-image img{
  display:block; width:100%; height:160px; object-fit:cover;
  backface-visibility:hidden; transform:translateZ(0);
}
.card-body{ padding:10px 12px 14px; background:var(--card2); }
.meta-row{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.tag{ color:#cfcfcf; font-size:13px; }
.lockmark{ color:#cfcfcfb2; }

.card-title{ font-size:16px; font-weight:700; line-height:1.35; margin:2px 0 6px; color:#eee; }
.time{ color:#bcbcbc; font-size:12px; }

/* ======= ⑥ 下部ナビ（丸ボタン） ======= */
.bottom-nav.bottom-nav--pill{
  position:fixed; left:0; right:0; bottom:0; padding:12px 16px calc(12px + env(safe-area-inset-bottom));
  background:linear-gradient(to top, #101010, #1111); display:flex; justify-content:space-around; gap:14px;
  border-top:1px solid rgba(255,255,255,.06); z-index:10;
}
.bottom-nav .nav-btn{
  width:48px; height:48px; border:none; border-radius:16px; font-size:22px; background:#242424; color:#fff;
  display:flex; align-items:center; justify-content:center; box-shadow:0 8px 16px rgba(0,0,0,.35);
}
.bottom-nav .blue{   background:#2a72ff; }
.bottom-nav .green{  background:#2fbf71; }
.bottom-nav .red{    background:#ff5a63; }
.bottom-nav .yellow{ background:#f2c744; color:#2b2100; }
.bottom-nav .purple{ background:#8a5bd3; }
